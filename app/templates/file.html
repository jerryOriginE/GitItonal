{% extends "base.html" %}

{% block content %}
<h2>{{ repo_name }} / {{ file_path }}</h2>

<p><a href="/">‚Üê Back to repository list</a></p>

<p>
    <strong>Path:</strong>
    <a href="/repo/{{ repo_name }}">/</a>
    {% set segments = file_path.split('/') %}
    {% set current = [] %}
    {% for seg in segments %}
        {% set _ = current.append(seg) %}
        / <a href="/repo/{{ repo_name }}/tree/{{ '/'.join(current[:-1]) if current|length > 1 else '' }}">{{ seg }}</a>
    {% endfor %}
</p>

{% if file_content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
<!-- <pre><code class="language-{{ language }}">{{ file_content | e }}</code></pre> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<pre><code>{{ file_content }}</code></pre>
{% else %}
<p><em>File is empty or could not be loaded.</em></p>
{% endif %}

{% endblock %}